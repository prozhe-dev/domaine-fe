var o=Object.defineProperty;var w=(c,e,t)=>e in c?o(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var a=(c,e,t)=>w(c,typeof e!="symbol"?e+"":e,t);window.customElements.define("wc-product-card-variants",class extends HTMLElement{constructor(){super();a(this,"swatchBtns",null);a(this,"imgPrimary",null);a(this,"imgSecondary",null);a(this,"activeSwatchId",null);a(this,"widths",[]);this.onSwatchChange=this.onSwatchChange.bind(this)}disconnectedCallback(){this.kill()}connectedCallback(){this.init()}init(){var t,s,h;this.swatchBtns=this.querySelectorAll("button.swatch"),this.imgPrimary=this.querySelector("img[data-slot='image-primary']"),this.imgSecondary=this.querySelector("img[data-slot='image-secondary']"),this.widths=((s=(t=this.imgPrimary)==null?void 0:t.dataset.widths)==null?void 0:s.split(",").map(i=>i.trim()))??[],(h=this.swatchBtns)==null||h.forEach(i=>i.addEventListener("click",this.onSwatchChange))}kill(){var t;(t=this.swatchBtns)==null||t.forEach(s=>s.removeEventListener("click",this.onSwatchChange))}onSwatchChange(t){var d;const s=t.target,{images:h,swatchId:i}=s.dataset;if(!i||this.activeSwatchId===i)return;this.activeSwatchId=i,(d=this.swatchBtns)==null||d.forEach(n=>{const l=n===s?"true":"false";n.dataset.selected=l,n.setAttribute("aria-selected",l)});const r=window.Utils.parseJSON(h??"[]");r[0]&&this.updateImage(this.imgPrimary,r[0]),r[1]&&this.updateImage(this.imgSecondary,r[1])}updateImage(t,s){t&&(t.src=s?window.Utils.resizeImage(s.src,"100x"):"",t.srcset=s?window.Utils.generateImgSrcset(s.src,this.widths):"",t.alt=(s==null?void 0:s.alt)??"")}});
