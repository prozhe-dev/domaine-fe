window.customElements.define("wc-product-card-variants",class extends HTMLElement{constructor(){super(),this.swatchBtns=null,this.imgPrimary=null,this.imgSecondary=null,this.activeSwatchId=null,this.widths=[],this.onSwatchChange=this.onSwatchChange.bind(this)}disconnectedCallback(){this.kill()}connectedCallback(){this.init()}init(){var t,s,i;this.swatchBtns=this.querySelectorAll("button.swatch"),this.imgPrimary=this.querySelector("img[data-slot='image-primary']"),this.imgSecondary=this.querySelector("img[data-slot='image-secondary']"),this.widths=((s=(t=this.imgPrimary)==null?void 0:t.dataset.widths)==null?void 0:s.split(",").map(e=>e.trim()))??[],(i=this.swatchBtns)==null||i.forEach(e=>e.addEventListener("click",this.onSwatchChange))}kill(){var t;(t=this.swatchBtns)==null||t.forEach(s=>s.removeEventListener("click",this.onSwatchChange))}onSwatchChange(t){var r;const s=t.target,{images:i,swatchId:e}=s.dataset;if(!i||!e||this.activeSwatchId===e)return;this.activeSwatchId=e,(r=this.swatchBtns)==null||r.forEach(a=>{const c=a===s;a.dataset.selected=c?"true":"false",a.setAttribute("aria-selected",c?"true":"false")});const d=window.Utils.parseJSON(i,[]);[this.imgPrimary,this.imgSecondary].forEach((a,c)=>{const n=d[c],h=a==null?void 0:a.parentElement;n!=null&&n.src&&h?(this.updateImage(a,n),h.classList.remove("hidden")):h&&h.classList.add("hidden")})}updateImage(t,s){const{src:i,alt:e=""}=s;t.src=window.Utils.resizeImage(i,"100x"),t.srcset=window.Utils.generateImgSrcset(i,this.widths),t.alt=e}});
